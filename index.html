<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Pixel Hello World OS</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- 像素字体 -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    :root {
      --bg: #050810;
      --grid: rgba(72, 85, 122, 0.18);
      --screen-bg: #050713;
      --screen-border: #22e0ff;
      --screen-border-dark: #006c8a;
      --text-main: #f4f7ff;
      --text-dim: #8ea1d0;
      --accent: #ffdd33;
      --pixel-green: #33ff99;
      --danger: #ff4d6a;
      --hero-color: #33ff99;
    }

    /* 主题：通过 data-theme 切换变量 */
    [data-theme="crt"] {
      --screen-border: #22e0ff;
      --screen-border-dark: #006c8a;
      --pixel-green: #33ff99;
      --accent: #ffdd33;
      --hero-color: #33ff99;
      --bg: #030608;
      --text-main: #f4f7ff;
      --text-dim: #8ea1d0;
    }

    [data-theme="synth"] {
      --screen-border: #ff4af2;
      --screen-border-dark: #7a0d84;
      --pixel-green: #ff71b8;
      --accent: #ffdd33;
      --hero-color: #ff71b8;
      --bg: #050013;
      --text-main: #fef2ff;
      --text-dim: #c79de8;
    }

    [data-theme="gb"] {
      --screen-border: #9bbc0f;
      --screen-border-dark: #4e6b06;
      --pixel-green: #9bbc0f;
      --accent: #8bac0f;
      --hero-color: #9bbc0f;
      --bg: #0f380f;
      --text-main: #e0f8cf;
      --text-dim: #8bac0f;
    }

    [data-theme="classic"] {
      --screen-border: #b0b0b0;
      --screen-border-dark: #6c6c6c;
      --pixel-green: #ffffff;
      --accent: #ffd93b;
      --hero-color: #ffffff;
      --bg: #111111;
      --text-main: #f1f1f1;
      --text-dim: #aaaaaa;
    }

    body {
      min-height: 100vh;
      background:
        linear-gradient(90deg, var(--grid) 1px, transparent 1px),
        linear-gradient(var(--grid) 1px, transparent 1px),
        radial-gradient(circle at top, #171f3a 0, var(--bg) 55%);
      background-size: 24px 24px, 24px 24px, cover;
      color: var(--text-main);
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 12px;
      overflow: hidden;
    }

    .app-root {
      position: relative;
      width: 100%;
      max-width: 1120px;
      z-index: 1;
    }

    /* 背景星空 + 像素块 */
    .layer-back {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 0;
      overflow: hidden;
    }

    .stars {
      position: absolute;
      inset: -20%;
      background-image:
        radial-gradient(2px 2px at 20% 10%, rgba(255,255,255,0.7), transparent),
        radial-gradient(2px 2px at 80% 40%, rgba(255,255,255,0.6), transparent),
        radial-gradient(2px 2px at 50% 80%, rgba(255,255,255,0.7), transparent),
        radial-gradient(2px 2px at 10% 70%, rgba(255,255,255,0.4), transparent),
        radial-gradient(2px 2px at 90% 20%, rgba(255,255,255,0.5), transparent);
      animation: star-move 50s linear infinite;
      opacity: 0.7;
    }

    @keyframes star-move {
      0% { transform: translateY(0) translateX(0); }
      50% { transform: translateY(30px) translateX(-20px); }
      100% { transform: translateY(0) translateX(0); }
    }

    .pixel-floating {
      position: absolute;
      inset: 0;
      pointer-events: none;
    }

    .pixel-dot {
      position: absolute;
      width: 6px;
      height: 6px;
      background: #39ffb6;
      box-shadow: 0 0 10px #39ffb6;
      image-rendering: pixelated;
      opacity: 0.7;
      animation: float 14s linear infinite;
    }

    .pixel-dot:nth-child(2) { background: #ff71b8; box-shadow: 0 0 10px #ff71b8; animation-duration: 18s; }
    .pixel-dot:nth-child(3) { background: #ffd93b; box-shadow: 0 0 10px #ffd93b; animation-duration: 22s; }
    .pixel-dot:nth-child(4) { background: #7aa2ff; box-shadow: 0 0 10px #7aa2ff; animation-duration: 16s; }

    @keyframes float {
      0% { transform: translateY(0) translateX(0); opacity: 0; }
      10% { opacity: 1; }
      50% { transform: translateY(-40vh) translateX(20vw); }
      100% { transform: translateY(-90vh) translateX(-10vw); opacity: 0; }
    }

    /* BOOT 屏幕 */
    #boot-screen {
      position: fixed;
      inset: 0;
      background: #000;
      color: #33ff99;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 10px;
      z-index: 999;
    }

    #boot-screen.hidden {
      animation: boot-out 0.7s ease forwards;
    }

    @keyframes boot-out {
      to {
        opacity: 0;
        visibility: hidden;
      }
    }

    .boot-line {
      margin: 6px 0;
      white-space: pre;
    }

    .boot-progress {
      margin-top: 14px;
      display: inline-block;
      border: 2px solid #33ff99;
      padding: 4px;
      min-width: 160px;
      text-align: left;
    }

    /* 顶部栏 */
    .top-bar {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 9px;
      color: var(--text-dim);
      text-transform: uppercase;
      letter-spacing: 0.08em;
      padding-inline: 2px;
      margin-bottom: 8px;
    }

    .top-left {
      display: inline-flex;
      align-items: center;
      gap: 6px;
    }

    .pixel-dot-mini {
      width: 8px;
      height: 8px;
      background: var(--danger);
      box-shadow: 0 0 5px var(--danger);
      image-rendering: pixelated;
    }

    .top-right {
      display: flex;
      gap: 10px;
      align-items: center;
      flex-wrap: wrap;
      justify-content: flex-end;
    }

    /* 像素按钮 / select */
    .pixel-btn {
      position: relative;
      padding: 6px 10px 8px;
      border: 0;
      background: var(--accent);
      color: #000;
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 8px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      cursor: pointer;
      box-shadow: 0 0 0 2px #000, 0 3px 0 #6f5b16;
      image-rendering: pixelated;
      transition: transform 0.05s linear, box-shadow 0.05s linear, filter 0.1s;
      white-space: nowrap;
    }

    .pixel-btn.small {
      padding-inline: 8px;
      font-size: 7px;
    }

    .pixel-btn:active {
      transform: translateY(1px);
      box-shadow: 0 0 0 2px #000, 0 1px 0 #6f5b16;
    }

    .pixel-btn.secondary {
      background: var(--pixel-green);
      box-shadow: 0 0 0 2px #000, 0 3px 0 #1c8a5b;
    }

    .pixel-btn.secondary:active {
      box-shadow: 0 0 0 2px #000, 0 1px 0 #1c8a5b;
    }

    .pixel-btn.muted {
      background: #111627;
      color: var(--text-dim);
      box-shadow: 0 0 0 2px #000, 0 3px 0 #12121b;
    }

    .pixel-btn.active-toggle {
      filter: brightness(1.2);
    }

    .pixel-select {
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 8px;
      background: #050713;
      color: var(--text-main);
      border: 2px solid #151c30;
      padding: 4px 6px;
      text-transform: uppercase;
      letter-spacing: 0.06em;
      image-rendering: pixelated;
    }

    /* 主屏幕框 */
    .screen {
      position: relative;
      background: radial-gradient(circle at top, #111933, #050713 60%);
      padding: 12px;
      border-radius: 0;
      image-rendering: pixelated;
      box-shadow:
        0 0 0 4px #000,
        0 0 0 8px var(--screen-border-dark),
        0 0 0 12px #000,
        0 0 40px rgba(0, 242, 255, 0.35);
    }

    .screen-inner {
      border: 4px solid var(--screen-border);
      background: repeating-linear-gradient(
        to bottom,
        #050713 0px,
        #050713 2px,
        #06081a 2px,
        #06081a 4px
      );
      padding: 16px;
      position: relative;
      overflow: hidden;
    }

    .scanline {
      position: absolute;
      inset: 0;
      background: linear-gradient(
        to bottom,
        rgba(255, 255, 255, 0.04),
        rgba(0, 0, 0, 0.2)
      );
      mix-blend-mode: soft-light;
      pointer-events: none;
      z-index: 0;
    }

    .glow {
      position: absolute;
      inset: -40%;
      background:
        radial-gradient(circle at 50% -20%, rgba(255, 255, 255, 0.12), transparent 50%),
        radial-gradient(circle at 10% 120%, rgba(0, 255, 204, 0.28), transparent 60%);
      opacity: 0.4;
      pointer-events: none;
      z-index: 0;
    }

    .screen-layout {
      position: relative;
      z-index: 1;
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.9fr);
      gap: 16px;
    }

    @media (max-width: 860px) {
      .screen-layout {
        grid-template-columns: 1fr;
      }
    }

    /* HERO 文本 */
    .hero {
      font-family: "Press Start 2P", system-ui, sans-serif;
      color: var(--pixel-green);
      text-transform: uppercase;
      letter-spacing: 0.12em;
      line-height: 1.6;
      font-size: 11px;
      margin-bottom: 12px;
    }

    .hero-title {
      font-size: 18px;
      margin-bottom: 10px;
      color: var(--hero-color);
      text-shadow:
        0 0 6px rgba(51, 255, 153, 0.8),
        0 0 14px rgba(0, 0, 0, 0.8);
      display: inline-flex;
      align-items: center;
    }

    .hero-sub {
      font-size: 9px;
      color: var(--text-dim);
      text-transform: none;
      letter-spacing: 0.06em;
      margin-bottom: 8px;
    }

    .cursor {
      display: inline-block;
      width: 14px;
      height: 18px;
      margin-left: 4px;
      background: var(--pixel-green);
      box-shadow: 0 0 8px rgba(51, 255, 153, 0.9);
      animation: blink 0.9s steps(1, end) infinite;
    }

    @keyframes blink {
      0%, 49% { opacity: 1; }
      50%, 100% { opacity: 0; }
    }

    /* 终端 */
    .terminal-card {
      margin-top: 8px;
      background: #050713;
      border: 2px solid #151c30;
      padding: 8px 8px 10px;
      box-shadow: inset 0 0 0 2px #000;
      position: relative;
      display: flex;
      flex-direction: column;
      height: 220px;
    }

    .terminal-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      font-size: 8px;
      color: var(--text-dim);
      margin-bottom: 6px;
      font-family: "Press Start 2P", system-ui, sans-serif;
    }

    .code-dots {
      display: flex;
      gap: 4px;
    }

    .code-dot {
      width: 8px;
      height: 8px;
      background: #353b56;
      box-shadow: 0 0 0 1px #000;
    }

    .code-dot.red { background: var(--danger); }
    .code-dot.yellow { background: var(--accent); }
    .code-dot.green { background: var(--pixel-green); }

    .terminal-output {
      flex: 1;
      overflow-y: auto;
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 9px;
      line-height: 1.7;
      color: var(--pixel-green);
      padding-right: 4px;
      margin-bottom: 4px;
      white-space: pre-wrap;
    }

    .terminal-output::-webkit-scrollbar {
      width: 5px;
    }

    .terminal-output::-webkit-scrollbar-thumb {
      background: #222842;
    }

    .terminal-input-row {
      display: flex;
      align-items: center;
      gap: 4px;
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 9px;
      color: var(--pixel-green);
    }

    .terminal-prompt {
      flex-shrink: 0;
    }

    .terminal-input {
      flex: 1;
      border: none;
      background: transparent;
      outline: none;
      color: var(--pixel-green);
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 9px;
    }

    .terminal-input::placeholder {
      color: #4f5a5f;
    }

    .terminal-line.system {
      color: var(--text-dim);
    }

    .terminal-line.error {
      color: var(--danger);
    }

    /* 右侧：精灵 + LOGO 生成器 */
    .right-pane {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    .sprite-card {
      border: 2px solid #171e39;
      background: #050713;
      padding: 10px;
      box-shadow: inset 0 0 0 2px #000;
      display: grid;
      grid-template-columns: minmax(0, 1.6fr) minmax(0, 1.4fr);
      gap: 10px;
    }

    @media (max-width: 600px) {
      .sprite-card {
        grid-template-columns: 1fr;
      }
    }

    .sprite-world {
      position: relative;
      background: #050713;
      border: 2px solid #171e39;
      height: 140px;
      overflow: hidden;
      image-rendering: pixelated;
    }

    .ground {
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
      height: 40px;
      background:
        linear-gradient(#141b33, #050713),
        repeating-linear-gradient(
          to right,
          #11172b 0,
          #11172b 6px,
          #050713 6px,
          #050713 12px
        );
      box-shadow: 0 0 0 2px #000;
    }

    .sprite {
      position: absolute;
      bottom: 40px;
      left: 10%;
      width: 32px;
      height: 32px;
      background:
        linear-gradient(#ffffff 0, #ffffff 50%, #ffd93b 50%, #ffd93b 100%);
      box-shadow:
        0 0 0 2px #000,
        0 0 12px rgba(0, 0, 0, 0.6);
      image-rendering: pixelated;
      animation: walk 4s ease-in-out infinite;
      cursor: pointer;
    }

    .sprite::before {
      content: "";
      position: absolute;
      width: 18px;
      height: 8px;
      background: #000;
      top: 6px;
      left: 7px;
      box-shadow: 0 0 0 2px #000;
    }

    .sprite::after {
      content: "";
      position: absolute;
      width: 8px;
      height: 4px;
      background: #000;
      top: 18px;
      left: 10px;
    }

    @keyframes walk {
      0% { transform: translateX(0) translateY(0); }
      25% { transform: translateX(40px) translateY(-4px); }
      50% { transform: translateX(80px) translateY(0); }
      75% { transform: translateX(40px) translateY(-4px); }
      100% { transform: translateX(0) translateY(0); }
    }

    .sprite-bubble {
      position: absolute;
      left: 60px;
      bottom: 70px;
      max-width: 160px;
      background: #050713;
      border: 2px solid #171e39;
      color: var(--text-main);
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 8px;
      padding: 6px 8px;
      box-shadow: 0 0 0 2px #000;
      display: none;
    }

    .sprite-bubble::after {
      content: "";
      position: absolute;
      left: -10px;
      bottom: 4px;
      width: 10px;
      height: 10px;
      background: #050713;
      border-left: 2px solid #171e39;
      border-bottom: 2px solid #171e39;
      box-shadow: -2px 2px 0 #000;
      transform: rotate(45deg);
    }

    .sprite-bubble.show {
      display: block;
    }

    .sprite-info {
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 8px;
      color: var(--text-dim);
      line-height: 1.6;
    }

    .sprite-info-title {
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 4px;
    }

    /* LOGO 生成器 */
    .logo-card {
      border: 2px solid #171e39;
      background: #050713;
      padding: 10px;
      box-shadow: inset 0 0 0 2px #000;
      margin-top: 4px;
    }

    .logo-title {
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 8px;
      color: var(--accent);
      text-transform: uppercase;
      letter-spacing: 0.1em;
      margin-bottom: 6px;
    }

    .logo-row {
      display: flex;
      flex-wrap: wrap;
      gap: 6px;
      margin-bottom: 6px;
    }

    .logo-input {
      flex: 1;
      min-width: 120px;
      border: 2px solid #151c30;
      background: #050713;
      color: var(--text-main);
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 8px;
      padding: 4px 6px;
      outline: none;
    }

    canvas#logo-canvas {
      border: 2px solid #151c30;
      background: #000;
      image-rendering: pixelated;
      width: 100%;
      max-width: 300px;
      height: auto;
      display: block;
      box-shadow: 0 0 0 2px #000;
    }

    .logo-tip {
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 7px;
      color: var(--text-dim);
      margin-top: 4px;
    }

    /* 页脚 */
    .footer {
      font-family: "Press Start 2P", system-ui, sans-serif;
      font-size: 8px;
      text-align: center;
      color: #5d6a96;
      margin-top: 6px;
      letter-spacing: 0.12em;
      text-transform: uppercase;
    }

    .footer span {
      color: var(--pixel-green);
    }

    @media (max-width: 520px) {
      .hero-title {
        font-size: 15px;
      }
      .screen-inner {
        padding: 12px;
      }
      .hero-sub {
        font-size: 8px;
      }
      .terminal-card {
        height: 200px;
      }
    }
  </style>
</head>
<body data-theme="crt">
  <!-- 背景层 -->
  <div class="layer-back">
    <div class="stars"></div>
    <div class="pixel-floating">
      <div class="pixel-dot" style="left: 10%; bottom: -10%;"></div>
      <div class="pixel-dot" style="left: 60%; bottom: -12%;"></div>
      <div class="pixel-dot" style="left: 85%; bottom: -16%;"></div>
      <div class="pixel-dot" style="left: 35%; bottom: -20%;"></div>
    </div>
  </div>

  <!-- BOOT 屏幕 -->
  <div id="boot-screen">
    <div class="boot-line">PIXEL OS v1.0</div>
    <div class="boot-line">INITIALIZING VIDEO...  OK</div>
    <div class="boot-line">SCANNING STARS...      OK</div>
    <div class="boot-line">LOADING HELLO WORLD... _</div>
    <div class="boot-progress" id="boot-progress">[..........]</div>
  </div>

  <!-- 主应用 -->
  <div class="app-root">
    <!-- 顶部栏 -->
    <header class="top-bar">
      <div class="top-left">
        <div class="pixel-dot-mini"></div>
        PIXEL HELLO WORLD • OS
      </div>
      <div class="top-right">
        <select id="lang-select" class="pixel-select" title="Language">
          <option value="en">EN</option>
          <option value="zh" selected>ZH</option>
          <option value="ja">JA</option>
          <option value="ko">KO</option>
          <option value="de">DE</option>
          <option value="es">ES</option>
          <option value="fr">FR</option>
        </select>

        <button class="pixel-btn small muted" data-theme-btn="crt">CRT</button>
        <button class="pixel-btn small muted" data-theme-btn="synth">SYNTH</button>
        <button class="pixel-btn small muted" data-theme-btn="gb">GB</button>
        <button class="pixel-btn small muted" data-theme-btn="classic">CLASSIC</button>

        <button class="pixel-btn small secondary" id="toggle-sfx">SFX OFF</button>
        <button class="pixel-btn small" id="toggle-bgm">BGM OFF</button>
      </div>
    </header>

    <!-- 主像素屏幕 -->
    <main class="screen">
      <div class="screen-inner">
        <div class="glow"></div>
        <div class="scanline"></div>

        <div class="screen-layout">
          <!-- 左侧：Hello + 终端 -->
          <section>
            <div class="hero">
              <div class="hero-title">
                <span id="hero-text">HELLO, WORLD</span>
                <span class="cursor"></span>
              </div>
              <div class="hero-sub" id="hero-sub">
                一个来自像素宇宙的 "Hello, World" 启动画面。
              </div>
            </div>

            <div class="terminal-card" aria-label="pixel terminal">
              <div class="terminal-header">
                <div class="code-dots">
                  <div class="code-dot red"></div>
                  <div class="code-dot yellow"></div>
                  <div class="code-dot green"></div>
                </div>
                <span>PIXEL&gt; TERMINAL</span>
              </div>
              <div class="terminal-output" id="terminal-output"></div>
              <div class="terminal-input-row">
                <span class="terminal-prompt">PS&gt;</span>
                <input
                  id="terminal-input"
                  class="terminal-input"
                  type="text"
                  autocomplete="off"
                  spellcheck="false"
                  placeholder='type "help" and press enter...'
                />
              </div>
            </div>
          </section>

          <!-- 右侧：精灵 + LOGO 生成器 -->
          <section class="right-pane">
            <div class="sprite-card">
              <div class="sprite-world">
                <div class="sprite" id="sprite"></div>
                <div class="sprite-bubble" id="sprite-bubble">
                  HELLO, HUMAN!<br/>WELCOME TO PIXEL WORLD.
                </div>
                <div class="ground"></div>
              </div>
              <div class="sprite-info">
                <div class="sprite-info-title">PIXEL COMPANION</div>
                <p>
                  · 点击右侧小人，他会对你打招呼。<br/>
                  · 你可以把这里当成你的像素 AI 宠物。<br/>
                  · 主题 / 语言切换时，它会继续在宇宙里散步。
                </p>
              </div>
            </div>

            <div class="logo-card">
              <div class="logo-title">PIXEL LOGO GENERATOR</div>
              <div class="logo-row">
                <input
                  id="logo-input"
                  class="logo-input"
                  type="text"
                  maxlength="16"
                  placeholder="输入你的名字或项目名..."
                />
                <button class="pixel-btn small secondary" id="logo-generate">
                  GENERATE
                </button>
                <button class="pixel-btn small" id="logo-download">
                  DOWNLOAD
                </button>
              </div>
              <canvas id="logo-canvas" width="300" height="80"></canvas>
              <div class="logo-tip">
                TIP: 点击 “GENERATE” 生成像素 LOGO，然后 “DOWNLOAD” 保存 PNG。
              </div>
            </div>
          </section>
        </div>
      </div>
    </main>

    <footer class="footer" id="footer">
      <div>PIXEL &lt;HELLO WORLD&gt; READY</div>
      <div>PRESS <span>ENTER</span> INSIDE TERMINAL</div>
    </footer>
  </div>

  <script>
    // ========== BOOT 动画 ==========
    (function bootSequence() {
      const boot = document.getElementById('boot-screen');
      const progress = document.getElementById('boot-progress');
      let step = 0;
      const frames = [
        '[#.........]',
        '[###.......]',
        '[#####.....]',
        '[#######...]',
        '[#########.]',
        '[##########]'
      ];
      const interval = setInterval(() => {
        progress.textContent = frames[Math.min(step, frames.length - 1)];
        step++;
        if (step > frames.length) {
          clearInterval(interval);
          boot.classList.add('hidden');
        }
      }, 300);
    })();

    // ========== 多语言 Hello World ==========
    const langData = {
      en: {
        hero: 'HELLO, WORLD',
        sub: 'A tiny pixel universe where every square lights up to say hello.'
      },
      zh: {
        hero: '你好，世界',
        sub: '一个来自像素宇宙的 Hello World 启动画面。'
      },
      ja: {
        hero: 'こんにちは、世界',
        sub: 'すべてのドットが「こんにちは」と光る小さなピクセル宇宙。'
      },
      ko: {
        hero: '안녕, 세상',
        sub: '모든 픽셀이 인사를 건네는 작은 우주입니다.'
      },
      de: {
        hero: 'HALLO, WELT',
        sub: 'Jedes Pixel sagt hier nur eins: Hallo.'
      },
      es: {
        hero: 'HOLA, MUNDO',
        sub: 'Un pequeño universo de píxeles que sólo quiere saludar.'
      },
      fr: {
        hero: 'BONJOUR, MONDE',
        sub: 'Un minuscule univers de pixels qui vous dit bonjour.'
      }
    };

    const langSelect = document.getElementById('lang-select');
    const heroText = document.getElementById('hero-text');
    const heroSub = document.getElementById('hero-sub');

    function updateLanguage(lang) {
      const data = langData[lang] || langData.en;
      heroText.textContent = data.hero.toUpperCase();
      heroSub.textContent = data.sub;
    }

    langSelect.addEventListener('change', () => {
      updateLanguage(langSelect.value);
      playClick();
    });

    updateLanguage(langSelect.value);

    // ========== 主题切换 ==========
    const themeButtons = document.querySelectorAll('[data-theme-btn]');
    function setTheme(theme) {
      document.body.setAttribute('data-theme', theme);
      themeButtons.forEach(btn => {
        if (btn.getAttribute('data-theme-btn') === theme) {
          btn.classList.remove('muted');
          btn.classList.add('active-toggle');
        } else {
          btn.classList.add('muted');
          btn.classList.remove('active-toggle');
        }
      });
    }
    themeButtons.forEach(btn => {
      btn.addEventListener('click', () => {
        setTheme(btn.getAttribute('data-theme-btn'));
        playClick();
      });
    });
    setTheme('crt');

    // ========== 音效 / BGM（Web Audio） ==========
    let audioCtx = null;
    let sfxEnabled = false;
    let bgmEnabled = false;
    let bgmInterval = null;

    function initAudio() {
      if (!audioCtx) {
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        if (AudioContext) {
          audioCtx = new AudioContext();
        }
      }
    }

    function playBeep(freq, duration) {
      if (!sfxEnabled) return;
      initAudio();
      if (!audioCtx) return;
      const osc = audioCtx.createOscillator();
      const gain = audioCtx.createGain();
      osc.type = 'square';
      osc.frequency.value = freq;
      gain.gain.value = 0.08;
      osc.connect(gain).connect(audioCtx.destination);
      osc.start();
      setTimeout(() => osc.stop(), duration);
    }

    function playClick() {
      playBeep(220, 60);
    }

    const sfxBtn = document.getElementById('toggle-sfx');
    const bgmBtn = document.getElementById('toggle-bgm');

    sfxBtn.addEventListener('click', () => {
      sfxEnabled = !sfxEnabled;
      if (sfxEnabled) {
        sfxBtn.textContent = 'SFX ON';
        sfxBtn.classList.add('active-toggle');
        playClick();
      } else {
        sfxBtn.textContent = 'SFX OFF';
        sfxBtn.classList.remove('active-toggle');
      }
    });

    function startBgm() {
      initAudio();
      if (!audioCtx) return;
      if (bgmInterval) clearInterval(bgmInterval);

      let step = 0;
      const pattern = [440, 660, 550, 660];
      bgmInterval = setInterval(() => {
        if (!bgmEnabled) return;
        playBeep(pattern[step % pattern.length], 100);
        step++;
      }, 320);
    }

    function stopBgm() {
      if (bgmInterval) {
        clearInterval(bgmInterval);
        bgmInterval = null;
      }
    }

    bgmBtn.addEventListener('click', () => {
      bgmEnabled = !bgmEnabled;
      if (bgmEnabled) {
        bgmBtn.textContent = 'BGM ON';
        bgmBtn.classList.add('active-toggle');
        startBgm();
      } else {
        bgmBtn.textContent = 'BGM OFF';
        bgmBtn.classList.remove('active-toggle');
        stopBgm();
      }
      playClick();
    });

    // ========== 终端实现 ==========
    const termOut = document.getElementById('terminal-output');
    const termIn = document.getElementById('terminal-input');

    function printLine(text, type) {
      const line = document.createElement('div');
      line.classList.add('terminal-line');
      if (type) line.classList.add(type);
      line.textContent = text;
      termOut.appendChild(line);
      termOut.scrollTop = termOut.scrollHeight;
    }

    function printPrompt(cmd) {
      printLine('PS> ' + cmd);
    }

    const termHelpText = [
      'AVAILABLE COMMANDS:',
      '  help   - show this help',
      '  hello  - print hello in current language',
      '  about  - about this pixel world',
      '  matrix - temporary matrix mode',
      '  clear  - clear the screen'
    ];

    function handleCommand(cmdRaw) {
      const cmd = cmdRaw.trim().toLowerCase();
      if (!cmd) return;
      printPrompt(cmd);
      playClick();

      switch (cmd) {
        case 'help':
          termHelpText.forEach(t => printLine(t, 'system'));
          break;
        case 'hello': {
          const current = langData[langSelect.value] || langData.en;
          printLine(current.hero.toUpperCase() + ' _/');
          break;
        }
        case 'about':
          printLine('PIXEL OS v1.0 • HELLO WORLD EDITION', 'system');
          printLine('MADE WITH PURE HTML + CSS + JS.', 'system');
          printLine('YOU CAN USE THIS PAGE AS YOUR PIXEL LANDING.', 'system');
          break;
        case 'clear':
          termOut.innerHTML = '';
          break;
        case 'matrix':
          runMatrixMode();
          break;
        default:
          printLine('UNKNOWN COMMAND: ' + cmd, 'error');
          printLine('TYPE "help" TO SEE AVAILABLE COMMANDS.', 'system');
      }
    }

    termIn.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') {
        handleCommand(termIn.value);
        termIn.value = '';
      }
    });

    // 初始化终端欢迎信息
    printLine('PIXEL TERMINAL READY.', 'system');
    printLine('TYPE "help" AND PRESS ENTER.', 'system');

    // matrix 模式：简单字符雨
    function runMatrixMode() {
      const chars = '01';
      let count = 0;
      const maxLines = 16;
      const interval = setInterval(() => {
        let line = '';
        const len = 24;
        for (let i = 0; i < len; i++) {
          line += chars[Math.floor(Math.random() * chars.length)];
        }
        printLine(line);
        count++;
        if (count >= maxLines) {
          clearInterval(interval);
          printLine('MATRIX MODE END.', 'system');
        }
      }, 80);
    }

    // ========== 精灵互动 ==========
    const sprite = document.getElementById('sprite');
    const spriteBubble = document.getElementById('sprite-bubble');
    let bubbleTimer = null;

    sprite.addEventListener('click', () => {
      spriteBubble.classList.add('show');
      playClick();
      if (bubbleTimer) clearTimeout(bubbleTimer);
      bubbleTimer = setTimeout(() => {
        spriteBubble.classList.remove('show');
      }, 2200);
    });

    // ========== LOGO 生成器 ==========
    const logoInput = document.getElementById('logo-input');
    const logoCanvas = document.getElementById('logo-canvas');
    const logoBtn = document.getElementById('logo-generate');
    const logoDownload = document.getElementById('logo-download');
    const ctx = logoCanvas.getContext('2d');

    function drawLogo(text) {
      const t = text || 'HELLO WORLD';
      ctx.imageSmoothingEnabled = false;
      ctx.clearRect(0, 0, logoCanvas.width, logoCanvas.height);

      // 背景栅格
      ctx.fillStyle = '#000000';
      ctx.fillRect(0, 0, logoCanvas.width, logoCanvas.height);
      ctx.strokeStyle = '#222840';
      for (let x = 0; x < logoCanvas.width; x += 8) {
        ctx.beginPath();
        ctx.moveTo(x + 0.5, 0);
        ctx.lineTo(x + 0.5, logoCanvas.height);
        ctx.stroke();
      }
      for (let y = 0; y < logoCanvas.height; y += 8) {
        ctx.beginPath();
        ctx.moveTo(0, y + 0.5);
        ctx.lineTo(logoCanvas.width, y + 0.5);
        ctx.stroke();
      }

      ctx.fillStyle = '#33ff99';
      ctx.shadowColor = '#33ff99';
      ctx.shadowBlur = 8;
      ctx.font = '16px "Press Start 2P"';
      ctx.textAlign = 'center';
      ctx.textBaseline = 'middle';
      ctx.fillText(t.toUpperCase(), logoCanvas.width / 2, logoCanvas.height / 2);

      ctx.shadowBlur = 0;
    }

    drawLogo('HELLO WORLD');

    logoBtn.addEventListener('click', () => {
      const text = logoInput.value.trim() || 'HELLO WORLD';
      drawLogo(text);
      playClick();
    });

    logoDownload.addEventListener('click', () => {
      const link = document.createElement('a');
      link.download = 'pixel-logo.png';
      link.href = logoCanvas.toDataURL('image/png');
      link.click();
      playClick();
    });
  </script>
</body>
</html>
